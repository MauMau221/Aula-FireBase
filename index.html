<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aula Firebase</title>
</head>

<body>
    <div>

        <button id="google" type="submit">Entrar</button>

        <p>Não tem conta? <a href="cadastro.html">Cadastre-se aqui!</a></p>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-analytics.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-auth.js";



        const firebaseConfig = {
            apiKey: "AIzaSyCPmjOVuWOUkXx8hRI0KEifoxDKC8fJOPA",
            authDomain: "aula-firebase-b4ad3.firebaseapp.com",
            projectId: "aula-firebase-b4ad3",
            storageBucket: "aula-firebase-b4ad3.firebasestorage.app",
            messagingSenderId: "987342065849",
            appId: "1:987342065849:web:f8db08473b17f4a4748b68",
            measurementId: "G-06B1EB0RT0"
        };
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        //Inicializa o serviço
        const auth = getAuth();
        const provider = new GoogleAuthProvider();


        document.getElementById('google').addEventListener('click', () => {
            signInWithPopup(auth, provider)
                .then((result) => {
                    const user = result.user
                    console.log(user);
                    const p = document.createElement('p');
                    p.innerText = 'Testando';
                    document.body.appendChild(p);
                    window.location.href = "home.html"
                }).catch((error) => {
                    const errorCode = error.code;
                })

        })




        // //Inicializa o firebase


        // document.getElementById('loginForm').addEventListener('submit', (e) => {
        //     //Trata (previne) eventos padrão do formulario
        //     e.preventDefault()

        //     const email = document.getElementById('email').value;
        //     const password = document.getElementById('password').value;

        //     signInWithEmailAndPassword(auth, email, password)
        //         .then((userCredential) => {
        //             // Signed up
        //             const user = userCredential.user;
        //             window.location.href = "home.html"
        //         })
        //         .catch((error) => {
        //             const errorCode = error.code;
        //             const errorMessage = error.message;
        //             console.log(errorMessage);
        //             alert('Email ou senha errado');
        //         });

        // })
    </script>
</body>

</html>